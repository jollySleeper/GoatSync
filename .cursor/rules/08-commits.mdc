---
description: Git commit conventions for GoatSync migration
globs: 
alwaysApply: false
---

# Git Commit Convention

## Format

```
<type>(<scope>): <description>
```

## Types

| Type | Description |
|------|-------------|
| `feat` | New feature |
| `fix` | Bug fix |
| `refactor` | Code change (no feature/fix) |
| `docs` | Documentation only |
| `test` | Adding or fixing tests |
| `chore` | Maintenance (deps, config) |

## Scopes

| Scope | Area |
|-------|------|
| `auth` | Authentication |
| `collection` | Collections |
| `item` | Items/revisions |
| `member` | Members |
| `invitation` | Invitations |
| `crypto` | Cryptography |
| `db` | Database/GORM |
| `model` | Domain models |
| `repo` | Repository layer |
| `service` | Service layer |
| `handler` | HTTP handlers |

## Examples

```bash
feat(auth): implement login challenge with BLAKE2b
feat(model): add Collection and CollectionType GORM models
fix(crypto): correct secretbox nonce handling
refactor(repo): extract stoken queries to dedicated file
docs: update API route documentation
chore(deps): upgrade gorm to v1.25.5
```

## Breaking Changes

```
refactor(model)!: rename Collection.MainItem to MainItemID

BREAKING CHANGE: Collection model field renamed.
```

## Releases and Tags

**Before creating a version tag:**

1. **Update CHANGELOG** - Add a new section in `docs/CHANGELOG.md` with:
   - Version number and date
   - Added/Changed/Fixed/Removed sections as appropriate
   - Any upgrade notes for users

2. **Commit the CHANGELOG** - Create a commit like:
   ```bash
   git commit -m "docs: update CHANGELOG for v0.x.x release"
   ```

3. **Create the tag** - Use annotated tags with release notes:
   ```bash
   git tag -a v0.x.x -m "v0.x.x - Brief description"
   git push origin v0.x.x
   ```

**Tag format:**
- Use semantic versioning: `v{major}.{minor}.{patch}`
- Pre-releases: `v0.2.0-alpha`, `v0.2.0-beta`, `v0.2.0-rc1`

**Example workflow:**
```bash
# 1. Update CHANGELOG
# 2. Commit CHANGELOG
git add docs/CHANGELOG.md
git commit -m "docs: update CHANGELOG for v0.2.0 release"

# 3. Push commit
git push origin main

# 4. Create and push tag
git tag -a v0.2.0 -m "v0.2.0 - Feature description"
git push origin v0.2.0
```
